image: generic-c

before_script:
  - git clone https://github.com/Microsoft/vcpkg.git --depth=1
  - sh ./vcpkg/bootstrap-vcpkg.sh
  - vcpkg/vcpkg install fmt

build-and-test:
  script:
    - cmake -B build -DCMAKE_TOOLCHAIN_FILE=vcpkg/scripts/buildsystems/vcpkg.cmake -DENABLE_CLANG_TIDY=ON
    # Will run clang-tidy alongside, checking code quality
    - cmake --build build
    # Run golden tests
    - ctest --test-dir build --output-on-failure
